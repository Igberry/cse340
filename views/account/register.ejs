<%- include('../partials/head') %>
<%- include('../partials/header') %>
<%- include('../partials/navigations') %>

<h1>Create an Account</h1>

<% if (message) { %>
    <p class="flash-message"><%= message %></p>
<% } %>

<% if (errors && errors.length > 0) { %>
    <ul class="error-list">
        <% errors.forEach(error => { %>
            <li><%= error.msg %></li>
        <% }) %>
    </ul>
<% } %>

<form action="/account/register" method="POST">
    <label for="firstname">First Name:</label>
    <input type="text" id="firstname" name="firstname" value="<%= (account && account.firstname) ? account.firstname : '' %>" required>

    <label for="lastname">Last Name:</label>
    <input type="text" id="lastname" name="lastname" value="<%= (account && account.lastname) ? account.lastname : '' %>" required>

    <label for="email">Email:</label>
    <input type="email" id="email" name="email" value="<%= (account && account.email) ? account.email : '' %>" required>

    <label for="password">Password:</label>
    <input type="password" id="password" name="password" required minlength="6">
    <p><small>Password must be at least 6 characters.</small></p>

    <% if (locals.account && (locals.account.account_type === 'Admin')) { %>
        <label for="account_type">Account Type:</label>
        <select id="account_type" name="account_type">
            <option value="Client">Client</option>
            <option value="Employee">Employee</option>
            <option value="Admin">Admin</option>
        </select>
    <% } %>

    <button type="submit">Register</button>
</form>

<p>Already have an account? <a href="/account/login">Login here</a></p>

<%- include('../partials/footer') %>